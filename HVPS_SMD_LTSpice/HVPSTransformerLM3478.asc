Version 4
SHEET 1 1884 960
WIRE 432 192 -176 192
WIRE 624 192 432 192
WIRE 832 192 752 192
WIRE 960 192 896 192
WIRE 1008 192 960 192
WIRE 1040 192 1008 192
WIRE 1120 192 1040 192
WIRE 432 208 432 192
WIRE 624 240 576 240
WIRE 768 240 752 240
WIRE 960 256 960 192
WIRE 1120 256 1120 192
WIRE 432 304 432 288
WIRE 688 320 688 288
WIRE 432 384 432 368
WIRE 576 384 576 240
WIRE 576 384 432 384
WIRE 768 400 768 240
WIRE 960 400 960 320
WIRE 960 400 768 400
WIRE 480 416 96 416
WIRE 576 416 576 384
WIRE 576 432 576 416
WIRE 1040 432 1040 192
WIRE 1040 432 864 432
WIRE 144 464 -64 464
WIRE 448 464 320 464
WIRE 864 464 864 432
WIRE 1120 464 1120 336
WIRE 144 496 16 496
WIRE 416 496 320 496
WIRE 480 512 480 416
WIRE 528 512 480 512
WIRE 768 512 768 400
WIRE 16 528 16 496
WIRE 96 528 96 416
WIRE 144 528 96 528
WIRE 384 528 320 528
WIRE 144 560 96 560
WIRE 352 560 320 560
WIRE 576 560 576 528
WIRE 448 592 448 464
WIRE 800 592 448 592
WIRE 864 592 864 544
WIRE 864 592 800 592
WIRE 912 592 864 592
WIRE 1072 592 992 592
WIRE 1136 592 1072 592
WIRE 1280 592 1216 592
WIRE -176 608 -176 192
WIRE 416 624 416 496
WIRE 480 624 416 624
WIRE 576 624 576 560
WIRE 576 624 480 624
WIRE -176 640 -176 608
WIRE 192 640 -176 640
WIRE 352 640 352 560
WIRE 352 640 192 640
WIRE -176 656 -176 640
WIRE 1072 656 1072 592
WIRE 1280 656 1280 592
WIRE 480 672 480 624
WIRE 576 672 576 624
WIRE 864 672 864 592
WIRE 16 688 16 592
WIRE 96 688 96 560
WIRE 192 688 192 640
WIRE -176 800 -176 736
WIRE -64 800 -64 464
WIRE 16 800 16 768
WIRE 96 800 96 768
WIRE 192 800 192 752
WIRE 384 800 384 528
WIRE 480 800 480 736
WIRE 576 800 576 752
WIRE 864 800 864 752
WIRE 1072 800 1072 720
WIRE 1280 800 1280 736
FLAG -176 800 0
FLAG 864 800 0
FLAG -176 608 IN
FLAG 1008 192 OUT
FLAG 768 512 0
FLAG 1120 464 0
FLAG 688 320 0
FLAG 576 800 0
FLAG -64 800 0
FLAG 384 800 0
FLAG 96 800 0
FLAG 192 800 0
FLAG 16 800 0
FLAG 480 800 0
FLAG 480 512 Gate
FLAG 576 416 Drain
FLAG 576 560 Source
FLAG 800 592 FB
FLAG 1072 800 0
FLAG 1280 800 0
SYMBOL voltage -176 640 R0
WINDOW 123 0 0 Left 2
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0.5
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL diode 832 208 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value RFN10NS3S
SYMBOL cap 944 256 R0
SYMATTR InstName Cout
SYMATTR Value .22µF
SYMATTR SpiceLine V=400 Rser=.25
SYMBOL res 848 448 R0
SYMATTR InstName R1
SYMATTR Value 1208k
SYMBOL res 848 656 R0
SYMATTR InstName R2
SYMATTR Value 10.2k
SYMBOL res 1104 240 R0
SYMATTR InstName Rload
SYMATTR Value 15k
SYMBOL Wurth_Elektronik\\WE-FLEX\\FLEX_7491961_1_25 688 224 R0
SYMATTR InstName U2
SYMBOL nmos 528 432 R0
SYMATTR InstName M1
SYMATTR Value DMT6010LSS
SYMATTR Prefix X
SYMBOL AutoGenerated\\LM3478_TRANS 224 512 R0
SYMATTR InstName U1
SYMBOL res 80 672 R0
SYMATTR InstName Rfreq
SYMATTR Value 47k
SYMBOL cap 176 688 R0
SYMATTR InstName Cin
SYMATTR Value 100µF
SYMATTR SpiceLine V=35 Rser=0.2
SYMBOL cap 0 528 R0
SYMATTR InstName Ccomp
SYMATTR Value 22nF
SYMATTR SpiceLine V=35 Rser=0.2
SYMBOL res 0 672 R0
SYMATTR InstName Rcomp
SYMATTR Value 4.7k
SYMBOL res 560 656 R0
SYMATTR InstName Rsen
SYMATTR Value 0.06
SYMBOL cap 464 672 R0
SYMATTR InstName Csen
SYMATTR Value 0.01µF
SYMATTR SpiceLine V=35 Rser=0.2
SYMBOL res 416 192 R0
SYMATTR InstName Rsnub
SYMATTR Value {Rsnub}
SYMBOL cap 416 304 R0
SYMATTR InstName Csnub
SYMATTR Value {Csnub}
SYMBOL res 1008 576 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 33k
SYMBOL cap 1056 656 R0
SYMATTR InstName Cc
SYMATTR Value 0.2µF
SYMBOL voltage 1280 640 R0
WINDOW 0 -93 53 Left 2
WINDOW 3 72 -137 VRight 2
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName PWM
SYMATTR Value PULSE(0 5 0 1n 1n 30u 62.5u)
SYMBOL res 1232 576 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rc
SYMATTR Value 2k
TEXT -184 64 Left 2 !.tran 0 40m 1u 1000n uic
TEXT 520 80 Left 2 !.param AG=25013 PR=1 PL=1 SR=5 SL=5
TEXT -184 96 Left 2 !.include LM3478_TRANS.LIB
TEXT -184 128 Left 2 !.include irli2910.spi
TEXT -360 376 Left 1 ;This is about right. High values (say 220nF) produce\na longer ramp-up and tend to produce overshoot on\nthe ramp up and a subsequentover-drop as it compensates.\nLower values are OK but tend to produce a small 'ringing' effect.
TEXT -368 784 Left 1 ;This is not very sensitive. The original value of 4.7k is fine.
TEXT 360 336 Left 1 ;2xCoss
TEXT 144 208 Left 1 ;SQRT(Lp/Cp) or 1/(Csnub * 2pi *Fring)\nLp = Parasitic Inductance\nCp = Parasitic Capacitance
TEXT 912 120 Left 1 ;1uF is fine. More just\nstretches the ramp up out.
TEXT 624 768 Left 1 ;This seems optimum
TEXT 144 56 Left 1 ;In real life, this overheating causes the output\nto drop significantly. This happens as load increases\nand is a factor of Rdson. Originally used a FET with\nRdson of around 100m. Now use 30m. Also, for SM\nFETs, need to ensure that Vd does not exceed about\n30V
TEXT -184 160 Left 2 !.include DMT6010LSS.txt
TEXT -88 304 Left 1 !.param Rsnub=1/({Csnub}*2*3.1415927*5000000)
TEXT -88 280 Left 1 !.param Csnub=2000pF
TEXT 1040 520 Left 1 ;Off-board PWM + RC filter voltage source.
LINE Normal -16 544 -224 480 2
LINE Normal -16 720 -224 736 2
LINE Normal 944 256 928 160 2
LINE Normal 528 496 480 112 2
RECTANGLE Normal 1328 848 1024 544 2
